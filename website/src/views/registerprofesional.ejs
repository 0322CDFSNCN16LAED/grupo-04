<!DOCTYPE html>
<html lang="en">

    <%- include('./partials/head') %>
    <script src="/js/registerProf.js"></script>

<body>
    <%- include('./partials/header') %>
    <main class="imagen-fondo-mobile fx justify-center">
        <div class="fx justify-center"></div>
            <div class="grey-opacity profile-box-edit desk-size">
                <div>
                    <h3 class="text-center">Registrate</h3>
                    <p class="font-mediun  text-center mb-5 -login">Ofrece tus servicios sin costo</p>
                </div>
                
                <form action="/prof/register" method="POST" enctype="multipart/form-data" id="formulario">
                    <div class=" map-column">
                        <div>
                            <div class="row mt-3">
                                <div class="col">
                                    <label class="visually-hidden">Nombre</label>
                                    <input 
                                        type="text" 
                                        name="name" 
                                        class="form-control <%= 
                                            locals.errors && errors.name 
                                            ? 'is-invalid' 
                                            : null 
                                        %>" 
                                        placeholder="Nombre"
                                        value="<%= locals.oldData ? oldData.name : null %>"
                                    >
                                    <span class="error"></span>
                                    <% if (locals.errors && errors.name) { %>
                                        <div class= "error-msg">
                                            <%= errors.name.msg %>               
                                        </div>
                                    <% } %>              
                                </div>
                                <div class="col">
                                    <label class="visually-hidden">Apellido</label>
                                    <input 
                                        type="text" 
                                        name="lastName" 
                                        class="form-control <%= 
                                            locals.errors && errors.lastName 
                                            ? 'is-invalid' 
                                            : null 
                                        %>" 
                                        value="<%= locals.oldData ? oldData.lastName : null %>"
                                        placeholder="Apellido"
                                    >
                                    <span class="error"></span>
                                    <% if (locals.errors && errors.lastName) { %>
                                        <div class= "error-msg">
                                            <%= errors.lastName.msg %>               
                                        </div>
                                    <% } %>
                                </div>
                            </div>
                            <div class="col-auto mt-3">
                                <label class="visually-hidden" for="">Nombre de usuario</label>
                                <div class="input-group">
                                    <div class="input-group-text">@</div>
                                    <input 
                                        type="text" 
                                        name="userName" 
                                        class="form-control <%= 
                                            locals.errors && errors.userName 
                                            ? 'is-invalid' 
                                            : null 
                                        %>"  
                                        placeholder="Nombre de usuario"
                                        value="<%= locals.oldData ? oldData.userName : null %>"
                                    >                                    
                                <span class="error"></span>
                                <% if (locals.errors && errors.userName) { %>
                                    <div class= "error-msg">
                                        <%= errors.userName.msg %>               
                                    </div>
                                <% } %>
                            </div>
                            </div>
                            <div class="col mt-3 mb-3">
                                <label class="visually-hidden">E-mail</label>
                                <input 
                                    type="email" 
                                    name="email" 
                                    class="form-control <%= 
                                        locals.errors && errors.email 
                                        ? 'is-invalid' 
                                        : null 
                                    %>"
                                    placeholder="E-mail"
                                    value="<%= locals.oldData ? oldData.email : null %>"
                                >
                                <span class="error"></span>
                                <% if (locals.errors && errors.email) { %>
                                    <div class= "error-msg">
                                        <%= errors.email.msg %>               
                                    </div>
                                <% } %>
                            </div>
                            <div class="col mb-3">
                                <label class="visually-hidden">Contraseña</label>
                                <input 
                                    type="password" 
                                    name="password" 
                                    class="form-control <%= 
                                    locals.errors && errors.password 
                                    ? 'is-invalid' 
                                    : null 
                                %>"
                                    placeholder="Contraseña"                                    
                                >
                                <span class="error"></span>
                                <% if (locals.errors && errors.password) { %>
                                    <div class= "error-msg">
                                        <%= errors.password.msg %>               
                                    </div>
                                <% } %>
                            </div> 
                            <div class="col mt-3">
                                <label class="visually-hidden">Teléfono</label>
                                <input 
                                    type="text" 
                                    name="phone" 
                                    class="form-control <%= 
                                        locals.errors && errors.phone
                                        ? 'is-invalid' 
                                        : null 
                                    %>" 
                                    placeholder="Teléfono"
                                    value="<%= locals.oldData ? oldData.phone : null %>"
                                >
                                <span class="error"></span>
                                <% if (locals.errors && errors.phone) { %>
                                    <div class= "error-msg">
                                        <%= errors.phone.msg %>               
                                    </div>
                                <% } %>
                            </div>
                    
                            <div class="col mt-3">
                                <label class="visually-hidden" for="">DNI</label>
                                <input 
                                    type="text" 
                                    name="DNI" 
                                    class="form-control <%= 
                                        locals.errors && errors.DNI 
                                        ? 'is-invalid' 
                                        : null 
                                    %>" 
                                    placeholder="DNI"
                                    value="<%= locals.oldData ? oldData.DNI : null %>"
                                >
                                <span class="error"></span>
                                <% if (locals.errors && errors.DNI) { %>
                                    <div class= "error-msg">
                                        <%= errors.DNI.msg %>               
                                    </div>
                                <% } %>
                            </div>                            
                            <div>
                            <% if (rubros.length > 0) { %>
                            <div>
                                <div class="font-medium mt-3 bolder">Rubros</div>
                                <% rubros.forEach(rubro => { %>
                                <div class="form-check">                                        
                                    <label class="form-check-label" for="<%= rubro %>"> <%= rubro %> </label>
                                    <input
                                        id="<%= rubro %>"
                                        class="form-check-input"
                                        name="rubro"
                                        type="checkbox"
                                        value="<%= rubro %>"
                                        <%= locals.rubrosData && rubrosData.includes(rubro) ? "checked" : null  %>               
                                        />
                                </div>
                                <% }) %>                                                                                           
                                <span class="error" style="color:red" id="errorRubro" name="errorRubro"></span>
                                </div>
                            <% } %> <% if (locals.errors && errors.rubro) { %>
                            <div class="error-msg"><%= errors.rubro.msg %></div>
                            <% } %>                                           
                            
                            <span class="error"></span>
                            <% if (locals.errors && errors.rubro) { %>
                                    <div class= "error-msg">
                                        <%= errors.rubro.msg %>               
                                    </div>
                            <% } %>
                            </div>
                             <div class="col-12 mt-3 mb-3">
                                <label for="Dirección" class="form-label visually-hidden">Dirección</label>
                                <input 
                                    type="text" 
                                    name= "address" 
                                    class="form-control <%= 
                                        locals.errors && errors.address 
                                        ? 'is-invalid' 
                                        : null 
                                    %>" 
                                    placeholder="Dirección"
                                    value="<%= locals.oldData ? oldData.address : null %>"
                                >
                                <span class="error"></span>
                                <% if (locals.errors && errors.address) { %>
                                    <div class= "error-msg">
                                        <%= errors.address.msg %>               
                                    </div>
                                <% } %>
                            </div>
                            <div class="row g-3">
                                <div class="col-sm-7">
                                    <input 
                                        type="text" 
                                        name= "city" 
                                        class="form-control <%= 
                                            locals.errors && errors.city 
                                            ? 'is-invalid' 
                                            : null 
                                        %>" 
                                        placeholder="Ciudad"
                                        value="<%= locals.oldData ? oldData.city : null %>"
                                    >
                                    <span class="error"></span>
                                    <% if (locals.errors && errors.city) { %>
                                        <div class= "error-msg">
                                            <%= errors.city.msg %>               
                                        </div>
                                    <% } %>
                                </div>
                                
                                <div class="col-sm">
                                    <input 
                                        type="text" 
                                        name= "state" 
                                        class="form-control <%=
                                            locals.errors && errors.state
                                            ? 'is-invalid'
                                            : null 
                                        %>"
                                        placeholder="Provincia"
                                        value="<%= locals.oldData ? oldData.state : null %>"
                                    >
                                    <span class="error"></span>
                                    <% if (locals.errors && errors.state) { %>
                                        <div class= "error-msg">
                                            <%= errors.state.msg %>               
                                        </div>
                                    <% } %>
                                </div>
                                <div class="col-sm">
                                    <input 
                                        type="text" 
                                        name= "zipCode" 
                                        class="form-control <%= 
                                            locals.errors && errors.zipCode 
                                            ? "is-invalid form-control" 
                                            : null 
                                        %>"
                                        placeholder="Código postal" 
                                        aria-label="Código postal"
                                        value="<%= locals.oldData ? oldData.zipCode : null %>"
                                    >
                                    <span class="error"></span>
                                    <% if (locals.errors && errors.zipCode) { %>
                                        <div class= "error-msg">
                                            <%= errors.zipCode.msg %>               
                                        </div>
                                    <% } %>
                                </div>
                            </div>                     
                            <div class="font-mediun mb-5-login mt-3">
                                <div class="mb-3  align-center">                   
                                    <label for="avatar" class="form-label"><h4 class="font-medium mb-0" >Foto de perfil</h4></label>
                                    <input 
                                    class="form-control" 
                                    type="file" 
                                    name= "avatar"
                                    value= "<%= locals.oldData ? oldData.avatar : null %>"
                                    >
                                    <span class="error"></span>
                                </div>  
                                <% if (locals.errors && errors.avatar) { %>
                                    <div class= "error-msg">
                                        <%= errors.avatar.msg %>               
                                    </div>
                                <% } %>                                                    
                            </div>
                            <div class="font-mediun mb-5-login">
                                <div class="mb-3">                   
                                    <label for="finished-jobs" class="form-label "><h4 class="font-medium" >Trabajos realizados</h4></label>
                                    <input class="form-control" name= "finished-jobs" type="file" id="finished-jobs" multiple>
                                    <span class="error"></span>
                                </div>
                            </div>                            
    
                        </div>
                        <div class="map-desk">                        
    
                        </div>                

                    </div>
                    
                   <div class="form-check mt-3">
                                <input class="form-check-input" name="terms" type="checkbox" value="" id="terminosYCondicioneS">
                                <label class="form-check-label" for="terminosYCondiciones">
                                    Soy mayor de edad y acepto los términos y condiciones
                                </label>
                            </div>
                    <div class="fx justify-center mt-3">
                        <button class="primary-button" type="submit">
                           Registrarme
                        </button>                      
                    </div>                     

                </form>               

            </div>
            
        </div>
    </main>
    <%- include('./partials/footer') %>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
    

</body>

</html>